## migration-dependencies - COMPLETED
Swap spreadsheet library dependencies - remove Fortune-Sheet, add react-spreadsheet

### Key decisions
- Removed @fortune-sheet/react from dependencies
- Added react-spreadsheet ^0.9.5 and scheduler ^0.23.2
- Rewrote SpreadsheetContainer to use react-spreadsheet imports
- Integrated SheetTabs, SpreadsheetToolbar, DropdownEditor components
- Added basic undo/redo history tracking in SpreadsheetContainer
- Import/export/click-to-navigate are placeholder implementations

### Files changed
- package.json (dependencies swapped)
- src/components/SpreadsheetContainer.tsx (rewritten for react-spreadsheet)

### Notes
- SpreadsheetContainer.test.tsx still mocks @fortune-sheet/react (migration-tests-update task)
- Build passes, 42 tests fail (expected - tests need update)
- Local CellBase type in types/spreadsheet.ts can now be removed since react-spreadsheet is installed
- Full implementation details deferred to migration-container-rewrite task

## migration-toolbar - COMPLETED
SpreadsheetToolbar component with basic actions for spreadsheet manipulation

### Key decisions
- Props: canUndo, canRedo, onUndo, onRedo, onImport, onExportExcel, onExportCSV, onAddRow
- Undo/Redo buttons with disabled state based on canUndo/canRedo props
- Import button triggers hidden file input accepting .xlsx, .xls, .csv
- Export uses Radix UI DropdownMenu with Excel (.xlsx) and CSV (.csv) options
- Add Row button calls onAddRow callback
- Uses shadcn/ui Button component with ghost variant for toolbar styling
- Lucide icons: Undo2, Redo2, Upload, Download, Plus, ChevronDown
- data-testid attributes for testing

### Files changed
- src/components/spreadsheet/SpreadsheetToolbar.tsx (new)
- src/components/spreadsheet/SpreadsheetToolbar.test.tsx (new, 26 tests)

### Notes
- Standalone component ready for SpreadsheetContainer integration
- Actual undo/redo/add-row behavior to be implemented via parent callbacks
- Tests cover: button states, callbacks, file input, dropdown behavior
- Radix dropdown portal not tested directly (vitest limitation), tested via attributes

## migration-sheet-tabs - COMPLETED
Custom SheetTabs component for multi-sheet navigation

### Key decisions
- Props: sheets, activeSheetId, onActivate, onRename, onDelete, onAdd
- Tab switching via single click calls onActivate(id)
- Inline rename on double-click, commits on Enter/blur, cancels on Escape
- Delete confirmation requires two clicks, auto-resets after 3 seconds
- Delete button hidden when only one sheet exists (can't delete last sheet)
- Active tab has distinct styling: bg-background with border, inactive uses bg-muted/50
- Uses data-testid attributes for testing
- Uses Tailwind CSS, lucide-react icons (Plus, X), and cn utility

### Files changed
- src/components/spreadsheet/SheetTabs.tsx (new)
- src/components/spreadsheet/SheetTabs.test.tsx (new, 23 tests)

### Notes
- Standalone component ready to integrate with SpreadsheetContainer
- Tests cover: rendering, tab switching, renaming, deletion, adding, edge cases
- Uses fireEvent instead of userEvent to avoid fake timer issues

## migration-dropdown-editor - COMPLETED
Custom DataEditor component for dropdown selection in spec columns

### Key decisions
- Implemented DropdownEditorProps interface matching react-spreadsheet's DataEditorProps
- Props: cell (SKUCell), onChange, exitEditMode, row, column
- Renders <select> when cell.dropdownOptions exists and has values
- Renders <input type="text"> as fallback when no dropdown options
- Keyboard: Enter/Tab/Escape all call exitEditMode() for consistent UX
- Auto-focus on mount for both select and input elements
- Empty "Select..." placeholder option in dropdown for clearing selection
- Uses data-testid attributes for testing

### Files changed
- src/components/spreadsheet/DropdownEditor.tsx (new)
- src/components/spreadsheet/DropdownEditor.test.tsx (new, 21 tests)

### Notes
- Created new src/components/spreadsheet directory for migration components
- Component is standalone, ready to integrate with react-spreadsheet once dependencies installed
- Tests cover: dropdown vs input rendering, onChange callbacks, keyboard events, auto-focus, edge cases

## migration-spreadsheet-adapter - COMPLETED
Create data conversion utilities for react-spreadsheet (convertToSpreadsheetData, convertFromSpreadsheetData)

### Key decisions
- convertToSpreadsheetData transforms CellData[][] to SKUMatrix
- Row 0 (header) cells have no readOnly or dropdownOptions
- Col 0 (SKU) cells for row > 0 get readOnly: true
- Spec columns (col 1+) for row > 0 get dropdownOptions from sorted specifications
- Specifications sorted by order field to match column positions
- Background colors converted to Tailwind-style className (bg-[#hex])
- convertFromSpreadsheetData transforms back, extracting bg from className

### Files changed
- src/lib/spreadsheet-adapter.ts (new)
- src/lib/spreadsheet-adapter.test.ts (new, 15 tests)

### Notes
- Uses SKUCell/SKUMatrix types from migration-spreadsheet-types task
- Handles empty cells, null values, numeric values
- Roundtrip conversion preserves values

## migration-spreadsheet-types - COMPLETED
Create extended cell type for react-spreadsheet (SKUCell interface, SKUMatrix type)

### Key decisions
- Defined CellBase type locally to avoid dependency on uninstalled react-spreadsheet package
- CellBase matches react-spreadsheet's interface: value, readOnly, className
- SKUCell extends CellBase<string | number | null> with dropdownOptions field
- SKUMatrix is (SKUCell | null)[][] to support nullable cells

### Files changed
- src/types/spreadsheet.ts (new)

### Notes
- react-spreadsheet not yet installed (handled by migration-dependencies task)
- CellBase is duplicated locally - will need update once react-spreadsheet installed
