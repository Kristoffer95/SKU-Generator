[
  {
    "id": "migration-spreadsheet-types",
    "category": "Spreadsheet Migration",
    "description": "Create extended cell type for react-spreadsheet. Define SKUCell interface extending CellBase with value, readOnly, className, and dropdownOptions fields. Create SKUMatrix type alias for 2D array of SKUCell.",
    "stepsToVerify": [
      "src/types/spreadsheet.ts exists with SKUCell interface",
      "SKUCell has: value (string|number|null), readOnly (boolean), className (string), dropdownOptions (string[])",
      "SKUMatrix type is exported as (SKUCell | null)[][]",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "migration-spreadsheet-adapter",
    "category": "Spreadsheet Migration",
    "description": "Create data conversion utilities for react-spreadsheet. Implement convertToSpreadsheetData() to transform CellData[][] to SKUMatrix with readOnly flags on SKU column and dropdownOptions on spec columns. Implement convertFromSpreadsheetData() to transform back.",
    "stepsToVerify": [
      "src/lib/spreadsheet-adapter.ts exports convertToSpreadsheetData and convertFromSpreadsheetData",
      "convertToSpreadsheetData sets readOnly: true on col 0 cells (except row 0 header)",
      "convertToSpreadsheetData populates dropdownOptions from specifications for spec columns",
      "convertFromSpreadsheetData converts SKUMatrix back to CellData[][]",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "migration-dropdown-editor",
    "category": "Spreadsheet Migration",
    "description": "Create custom DataEditor component for dropdown selection in spec columns. When cell has dropdownOptions, render <select> with options. When no dropdownOptions, render text input. Handle keyboard events (Enter, Tab, Escape) for UX.",
    "stepsToVerify": [
      "src/components/spreadsheet/DropdownEditor.tsx exports DropdownEditor component",
      "Component renders <select> when cell.dropdownOptions exists and has values",
      "Component renders <input type='text'> as fallback when no dropdown options",
      "Keyboard: Enter/Tab commits and exits edit, Escape cancels",
      "Select auto-focuses on mount"
    ],
    "passes": true
  },
  {
    "id": "migration-sheet-tabs",
    "category": "Spreadsheet Migration",
    "description": "Create custom SheetTabs component for multi-sheet navigation. Support tab switching (click), tab renaming (double-click), tab deletion (X button with confirmation), and add new sheet (+ button). Style active tab distinctly.",
    "stepsToVerify": [
      "src/components/spreadsheet/SheetTabs.tsx exports SheetTabs component",
      "Click on tab calls onActivate with sheet id",
      "Double-click enables inline rename input",
      "Rename commits on Enter/blur, cancels on Escape",
      "X button calls onDelete (visible only when multiple sheets exist)",
      "+ button calls onAdd",
      "Active tab has distinct styling (border/background)"
    ],
    "passes": true
  },
  {
    "id": "migration-toolbar",
    "category": "Spreadsheet Migration",
    "description": "Create SpreadsheetToolbar component with basic actions. Include Undo/Redo buttons, Import button (opens file picker for Excel/CSV), Export dropdown (Excel/CSV options), and Add Row button.",
    "stepsToVerify": [
      "src/components/spreadsheet/SpreadsheetToolbar.tsx exports SpreadsheetToolbar component",
      "Undo button reverts last change (or is disabled when nothing to undo)",
      "Redo button re-applies undone change (or is disabled when nothing to redo)",
      "Import button triggers file input for .xlsx/.csv files",
      "Export offers Excel and CSV download options",
      "Add Row button appends new empty row to active sheet"
    ],
    "passes": true
  },
  {
    "id": "migration-dependencies",
    "category": "Spreadsheet Migration",
    "description": "Swap spreadsheet library dependencies. Remove @fortune-sheet/react, add react-spreadsheet and scheduler peer dependency.",
    "stepsToVerify": [
      "package.json does not contain @fortune-sheet/react",
      "package.json contains react-spreadsheet",
      "package.json contains scheduler as dependency",
      "npm install completes without errors",
      "npm run build completes without errors"
    ],
    "passes": true
  },
  {
    "id": "migration-container-rewrite",
    "category": "Spreadsheet Migration",
    "description": "Rewrite SpreadsheetContainer to use react-spreadsheet instead of Fortune-Sheet. Integrate custom DropdownEditor, SheetTabs, and SpreadsheetToolbar. Remove Fortune-Sheet imports, hooks, and data conversion. Use new spreadsheet-adapter functions for data transformation.",
    "stepsToVerify": [
      "SpreadsheetContainer imports from 'react-spreadsheet' not '@fortune-sheet/react'",
      "Component renders <Spreadsheet> with data, onChange, DataEditor props",
      "SheetTabs component renders below spreadsheet",
      "SpreadsheetToolbar component renders above spreadsheet",
      "ValidationPanel still renders and functions correctly",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "migration-readonly-sku",
    "category": "Spreadsheet Migration",
    "description": "Verify SKU column (column A) is read-only in the new react-spreadsheet implementation. Users cannot edit SKU cells except the header. Apply visual styling to indicate read-only status.",
    "stepsToVerify": [
      "Click on SKU cell (row > 0) does not enable editing",
      "SKU column has distinct background color (#f1f5f9 gray-blue)",
      "Header cell (row 0, col 0) IS editable for renaming column",
      "Auto-generated SKU values still update when spec values change"
    ],
    "passes": true
  },
  {
    "id": "migration-dropdowns",
    "category": "Spreadsheet Migration",
    "description": "Verify dropdown selection works in spec columns. When clicking/editing a spec column cell, dropdown appears with specification values. Selecting a value updates the cell and triggers SKU regeneration.",
    "stepsToVerify": [
      "Click/Enter on spec column cell shows dropdown with spec values",
      "Dropdown options match displayValues from specification store",
      "Selecting a value updates cell content",
      "SKU in column A regenerates with new skuFragment",
      "Tab/Enter moves to next cell after selection"
    ],
    "passes": true
  },
  {
    "id": "migration-duplicate-highlight",
    "category": "Spreadsheet Migration",
    "description": "Verify duplicate SKU warning styling works. Rows with duplicate SKU values should have amber background highlighting on the SKU cell.",
    "stepsToVerify": [
      "Create two rows with same spec value combination",
      "Both SKU cells show amber background (#fef3c7)",
      "Changing one row to have different values removes amber from both",
      "Validation panel shows duplicate SKU errors"
    ],
    "passes": true
  },
  {
    "id": "migration-click-navigate",
    "category": "Spreadsheet Migration",
    "description": "Implement click-to-navigate for validation errors. When clicking an error in ValidationPanel, scroll to and select the affected cell in the spreadsheet.",
    "stepsToVerify": [
      "Click on validation error in panel",
      "Spreadsheet scrolls to show the affected cell",
      "Affected cell is selected/highlighted",
      "Works for both missing-value and duplicate-sku error types"
    ],
    "passes": true
  },
  {
    "id": "migration-css-styles",
    "category": "Spreadsheet Migration",
    "description": "Add CSS styles for react-spreadsheet customizations. Style read-only cells, duplicate warning cells, header row, dropdown editor, and toolbar.",
    "stepsToVerify": [
      "src/index.css (or dedicated file) has .sku-spreadsheet styles",
      "Read-only cells have gray-blue background",
      "Duplicate SKU cells have amber background",
      "Header row (first row) has bold text and light background",
      "Dropdown/select has proper focus outline styling",
      "Toolbar buttons have consistent styling with app theme"
    ],
    "passes": true
  },
  {
    "id": "migration-tests-update",
    "category": "Spreadsheet Migration",
    "description": "Update SpreadsheetContainer tests for react-spreadsheet. Mock react-spreadsheet instead of @fortune-sheet/react. Update test assertions for new component structure.",
    "stepsToVerify": [
      "SpreadsheetContainer.test.tsx mocks 'react-spreadsheet' not '@fortune-sheet/react'",
      "Tests verify data transformation works correctly",
      "Tests verify sheet tab interactions",
      "npm run test passes for SpreadsheetContainer tests"
    ],
    "passes": true
  },
  {
    "id": "migration-undo-redo",
    "category": "Spreadsheet Migration",
    "description": "Implement undo/redo functionality for spreadsheet edits. Track change history and allow reverting/reapplying changes via toolbar buttons.",
    "stepsToVerify": [
      "Edit a cell value, click Undo - value reverts to previous",
      "After Undo, click Redo - value returns to edited state",
      "Undo button disabled when no history",
      "Redo button disabled when at latest state",
      "History clears when switching sheets"
    ],
    "passes": true
  },
  {
    "id": "migration-import-export",
    "category": "Spreadsheet Migration",
    "description": "Verify import/export functionality works with new spreadsheet. Toolbar import loads Excel/CSV files, export downloads current sheet data.",
    "stepsToVerify": [
      "Click Import, select .xlsx file - data loads into active sheet",
      "Click Import, select .csv file - data loads into active sheet",
      "Click Export > Excel - downloads .xlsx file with current data",
      "Click Export > CSV - downloads .csv file with current data",
      "Imported data triggers SKU regeneration"
    ],
    "passes": true
  },
  {
    "id": "migration-add-row",
    "category": "Spreadsheet Migration",
    "description": "Implement Add Row functionality in toolbar. Button appends new empty row to active sheet with proper cell structure for spec columns.",
    "stepsToVerify": [
      "Click Add Row button in toolbar",
      "New row appears at bottom of sheet",
      "New row has empty SKU cell and empty spec cells",
      "Spec cells in new row have dropdown functionality",
      "Selecting values in new row generates SKU"
    ],
    "passes": true
  },
  {
    "id": "sheet-local-specifications",
    "category": "Sheet Enhancements",
    "description": "Make specifications local to each sheet instead of global. Each sheet should have its own independent set of specifications. Add ColumnDef interface with id, type ('sku'|'spec'|'free'), specId (optional), and header fields. Update SheetConfig to include columns: ColumnDef[] and specifications: Specification[] arrays. Migrate existing sheets to include copies of global specs.",
    "stepsToVerify": [
      "src/types/index.ts exports ColumnDef interface with id, type, specId?, header fields",
      "SheetConfig interface includes columns: ColumnDef[] and specifications: Specification[]",
      "Creating a new sheet initializes with empty specifications array",
      "Adding a spec to Sheet1 does NOT add it to Sheet2",
      "Switching sheets shows different specifications in sidebar",
      "Existing user data migrates correctly with specs copied to each sheet",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "sheet-default-rows",
    "category": "Sheet Enhancements",
    "description": "New sheets should be created with 50 empty rows by default and only the SKU column. Modify createEmptySheet() to generate header row plus 50 empty data rows with just the SKU column.",
    "stepsToVerify": [
      "Create a new sheet via + button",
      "New sheet has exactly 51 rows (1 header + 50 data rows)",
      "New sheet has only SKU column initially",
      "Each empty row has an empty cell for the SKU column",
      "User can add spec columns to populate the sheet"
    ],
    "passes": true
  },
  {
    "id": "column-drag-reorder",
    "category": "Column Management",
    "description": "Implement column reordering by dragging column headers in the spreadsheet. Add drag handles or make entire header cell draggable. On drop, reorder the columns array and update all row data accordingly. SKU column (index 0) should not be movable.",
    "stepsToVerify": [
      "Column headers show drag affordance on hover (cursor change or grip icon)",
      "Dragging a column header shows visual feedback (highlight drop zones)",
      "Dropping column at new position reorders columns array in store",
      "All row data shifts to match new column order",
      "SKU column cannot be dragged (stays at position 0)",
      "Undo/redo works for column reorder operations"
    ],
    "passes": true
  },
  {
    "id": "column-types-spec-free",
    "category": "Column Management",
    "description": "Support two column types: spec columns (linked to a specification with dropdown validation) and free columns (plain text input, no SKU contribution). Spec columns reference a specId and render dropdowns. Free columns render as regular text input. Only spec column values contribute to SKU generation.",
    "stepsToVerify": [
      "Can add a 'spec column' that shows dropdown with spec values",
      "Can add a 'free column' that shows plain text input",
      "Free columns have no dropdown options",
      "SKU generation only includes values from spec columns",
      "Free column values do not affect generated SKU",
      "spreadsheet-adapter correctly identifies column types from columns array"
    ],
    "passes": true
  },
  {
    "id": "add-column-dialog",
    "category": "Column Management",
    "description": "Create AddColumnDialog component for inserting columns at any position. Dialog should include: column type selector (Spec/Free), spec selector dropdown (if spec type, with option to create new), column name input (for free columns), and position selector showing 'At end' or 'Before [ColumnName]' options.",
    "stepsToVerify": [
      "src/components/AddColumnDialog.tsx exports AddColumnDialog component",
      "Dialog has column type toggle: 'Specification' vs 'Free'",
      "When Specification selected, shows dropdown of existing specs + 'Create new' option",
      "When Free selected, shows text input for column name",
      "Position dropdown shows all current columns as 'Before X' options plus 'At end'",
      "Submitting adds column at selected position and updates all row data"
    ],
    "passes": true
  },
  {
    "id": "column-context-menu",
    "category": "Column Management",
    "description": "Add right-click context menu on column headers with options: 'Insert column before', 'Insert column after', 'Delete column'. Insert options open AddColumnDialog with position pre-set. Delete shows confirmation for spec columns (warns about data loss).",
    "stepsToVerify": [
      "Right-click on column header shows context menu",
      "Menu has 'Insert column before' option",
      "Menu has 'Insert column after' option",
      "Menu has 'Delete column' option",
      "Insert options open AddColumnDialog with correct position pre-selected",
      "Delete column removes column from columns array and all row data",
      "SKU column context menu does not show delete option"
    ],
    "passes": true
  },
  {
    "id": "delete-spec-confirmation",
    "category": "Specification Management",
    "description": "Create DeleteSpecConfirmDialog component for confirming specification deletion. Show spec name and warn that associated columns will be removed. Add delete button to SpecificationList items. On confirm, remove spec from sheet.specifications and remove all columns that reference that specId.",
    "stepsToVerify": [
      "src/components/DeleteSpecConfirmDialog.tsx exports DeleteSpecConfirmDialog component",
      "Dialog shows spec name being deleted",
      "Dialog warns about associated column removal",
      "Dialog has Cancel and Delete buttons (Delete is destructive styled)",
      "SpecificationList shows delete button/icon for each spec",
      "Clicking delete opens confirmation dialog",
      "Confirming removes spec and all columns with matching specId",
      "Row data updates to remove deleted column cells"
    ],
    "passes": true
  },
  {
    "id": "spec-store-migration",
    "category": "Specification Management",
    "description": "Migrate specification management methods from global useSpecificationsStore to sheet-scoped methods in useSheetsStore. All spec operations (add, update, remove, addValue, updateValue, removeValue) should take sheetId as first parameter. Update SpecificationList and AddSpecDialog to use sheet-scoped methods.",
    "stepsToVerify": [
      "useSheetsStore has addSpecification(sheetId, name) method",
      "useSheetsStore has removeSpecification(sheetId, specId) method",
      "useSheetsStore has addSpecValue(sheetId, specId, displayValue, skuFragment) method",
      "useSheetsStore has updateSpecValue(sheetId, specId, valueId, updates) method",
      "useSheetsStore has removeSpecValue(sheetId, specId, valueId) method",
      "SpecificationList reads specs from activeSheet.specifications",
      "AddSpecDialog uses sheet-scoped addSpecification method",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "toolbar-add-column-button",
    "category": "UX Improvements",
    "description": "Add discoverable 'Add Column' button to SpreadsheetToolbar. Currently columns can only be added via right-click context menu which is not discoverable. Add button with Columns icon after 'Add Row' button. Wire to existing AddColumnDialog with position set to 'end'.",
    "stepsToVerify": [
      "SpreadsheetToolbar has 'Add Column' button visible after 'Add Row' button",
      "Button has Columns icon from lucide-react",
      "Clicking button opens AddColumnDialog",
      "Dialog defaults to inserting column at end",
      "Can add both spec and free columns via the button",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "spec-name-editing",
    "category": "UX Improvements",
    "description": "Add ability to edit specification names after creation. Currently spec VALUES can be edited but spec NAMES cannot. Add pencil edit icon button to SpecItem header. When clicked, show inline Input field with Save/Cancel buttons. On save, call updateSpecification() and sync column headers that reference this spec.",
    "stepsToVerify": [
      "SpecItem shows pencil edit icon button next to spec name",
      "Clicking edit icon enters inline edit mode with Input field",
      "Input shows current spec name as initial value",
      "Save button (checkmark) commits the change",
      "Cancel button (X) reverts to original name",
      "Validation prevents empty name or duplicate name",
      "Saving updates spec name in store via updateSpecification()",
      "All columns with specId matching edited spec have their header updated",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "sheet-tabs-fixed-layout",
    "category": "UX Improvements",
    "description": "Fix SheetTabs position so they stay visible at bottom of viewport regardless of row count. Currently with many rows the tabs get pushed down requiring scroll. Ensure spreadsheet area is the scrollable portion while SheetTabs remains fixed at bottom.",
    "stepsToVerify": [
      "Add 100+ rows to a sheet",
      "SheetTabs remain visible at bottom of viewport without scrolling",
      "Spreadsheet area scrolls internally to show all rows",
      "ValidationPanel also stays visible below SheetTabs",
      "Layout works correctly when sidebar is collapsed or expanded",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "remove-duplicate-import-export",
    "category": "UX Improvements",
    "description": "Remove duplicate Import/Export buttons from SpreadsheetToolbar. Import/Export functionality exists in both AppLayout header AND SpreadsheetToolbar causing confusion. Remove from toolbar, keep only in header. Toolbar should have: Undo, Redo, Add Row, Add Column.",
    "stepsToVerify": [
      "SpreadsheetToolbar no longer has Import button",
      "SpreadsheetToolbar no longer has Export dropdown",
      "SpreadsheetToolbar has: Undo, Redo, Add Row, Add Column buttons only",
      "AppLayout header still has working Import button",
      "AppLayout header still has working Export dropdown with Excel/CSV options",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "update-documentation-tour",
    "category": "Documentation",
    "description": "Update GUIDE.md and guided-tour.ts to reflect current app architecture. Remove references to deprecated 'Config sheet' approach. Update Fortune-Sheet selectors to react-spreadsheet selectors. Document new features: Add Column button, spec name editing. Simplify tour to ~15-18 steps focused on current sidebar-based workflow.",
    "stepsToVerify": [
      "GUIDE.md does not reference 'Config sheet' or 'Config tab'",
      "GUIDE.md documents sidebar-based specification management",
      "GUIDE.md has section on adding columns via toolbar button",
      "GUIDE.md has section on editing specification names",
      "guided-tour.ts uses [data-tour] selectors not .fortune-sheet-* selectors",
      "Tour steps reference current UI components and workflow",
      "Tour completes without errors highlighting missing elements",
      "npm run test passes for guided-tour tests"
    ],
    "passes": true
  },
  {
    "id": "spec-value-sku-reactivity",
    "category": "Bug Fix",
    "description": "SKU does not reactively update when spec value's skuFragment is edited. When editing a spec value's SKU fragment in the sidebar (e.g., changing 'COT' to 'COT-updated'), all SKUs in the spreadsheet that use that value should automatically regenerate. Currently the SKU remains stale showing the old fragment.",
    "stepsToVerify": [
      "Add a row with spec values selected (e.g., Red, Small, Cotton generating R-S-COT)",
      "In sidebar, edit Cotton's SKU fragment from 'COT' to 'COT-NEW'",
      "SKU in spreadsheet immediately updates to 'R-S-COT-NEW'",
      "Works for all rows that contain the edited spec value",
      "Works across all sheets that have columns using that spec",
      "Undo/redo properly handles the SKU regeneration",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "remotion-setup",
    "category": "Remotion Video",
    "description": "Set up Remotion alongside the existing Vite project. Install dependencies (remotion, @remotion/cli, @remotion/transitions, @remotion/tailwind). Create remotion.config.ts with Tailwind support. Create remotion/index.ts entry point and remotion/Root.tsx composition registration. Add npm scripts for development and rendering.",
    "stepsToVerify": [
      "package.json contains remotion, @remotion/cli, @remotion/transitions dependencies",
      "remotion.config.ts exists with Tailwind configuration",
      "remotion/index.ts exists with registerRoot call",
      "remotion/Root.tsx exists with SKUDemo composition registered",
      "package.json has 'remotion:dev' script: 'remotion studio remotion/index.ts'",
      "package.json has 'remotion:build' script for rendering",
      "npm run remotion:dev opens Remotion Studio without errors"
    ],
    "passes": true
  },
  {
    "id": "remotion-animation-utils",
    "category": "Remotion Video",
    "description": "Create reusable animation utilities and foundation components. Create remotion/utils/animations.ts with fadeIn, slideIn, springScale, typewriter helpers. Create AnimatedText.tsx for fade/slide text, TypewriterText.tsx for character reveal, and FeatureHighlight.tsx for spotlight/callout effects.",
    "stepsToVerify": [
      "remotion/utils/animations.ts exports fadeIn, slideIn, springScale, typewriter functions",
      "remotion/components/AnimatedText.tsx renders text with fade and slide animations",
      "remotion/components/TypewriterText.tsx reveals text character-by-character",
      "remotion/components/FeatureHighlight.tsx renders animated spotlight/callout box",
      "All animations use useCurrentFrame() not CSS transitions",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "remotion-mockup-components",
    "category": "Remotion Video",
    "description": "Create mockup components that visually match the SKU Generator app. Create AppFrame.tsx (browser chrome), MockSidebar.tsx, MockSpecCard.tsx (expandable), MockSpreadsheet.tsx (grid with cells), MockSheetTabs.tsx, MockSettingsDialog.tsx, and MockValidationPanel.tsx. Use same Tailwind classes and shadcn/ui styling as the main app.",
    "stepsToVerify": [
      "remotion/components/AppFrame.tsx renders browser window frame with title bar",
      "remotion/components/MockSidebar.tsx renders sidebar with spec cards matching app style",
      "remotion/components/MockSpecCard.tsx has expandable animation driven by frame",
      "remotion/components/MockSpreadsheet.tsx renders grid with SKU and spec columns",
      "remotion/components/MockSheetTabs.tsx renders tab bar matching app style",
      "remotion/components/MockSettingsDialog.tsx renders settings modal with delimiter options",
      "remotion/components/MockValidationPanel.tsx renders error panel with items",
      "All components use Tailwind classes consistent with main app"
    ],
    "passes": true
  },
  {
    "id": "remotion-intro-scene",
    "category": "Remotion Video",
    "description": "Create IntroScene.tsx (~4 seconds, 120 frames at 30fps). Animate app logo with spring scale from 0 to 1. Display title 'SKU Generator' with typewriter effect. Fade in tagline after title completes. Use subtle background gradient.",
    "stepsToVerify": [
      "remotion/scenes/IntroScene.tsx exports IntroScene component",
      "Logo animates with spring scale (damping: 15 for slight bounce)",
      "Title 'SKU Generator' appears character-by-character",
      "Tagline fades in with upward slide after title",
      "Scene duration is approximately 120 frames",
      "Visual style matches app branding"
    ],
    "passes": true
  },
  {
    "id": "remotion-spec-management-scene",
    "category": "Remotion Video",
    "description": "Create SpecManagementScene.tsx (~7 seconds, 210 frames). Show sidebar sliding in from left with spring animation. Animate spec cards appearing with staggered fade-in. Show card expansion animation. Simulate drag-to-reorder with ghost card moving and other cards shifting.",
    "stepsToVerify": [
      "remotion/scenes/SpecManagementScene.tsx exports SpecManagementScene component",
      "Sidebar slides in from left using spring animation",
      "Spec cards (Color, Size, Material) appear with staggered timing",
      "One card expands to show values with height animation",
      "Drag reorder simulation shows card moving and others shifting",
      "SKU fragment badges are highlighted during expansion"
    ],
    "passes": true
  },
  {
    "id": "remotion-spreadsheet-scene",
    "category": "Remotion Video",
    "description": "Create SpreadsheetScene.tsx (~10 seconds, 300 frames). Show browser frame sliding in. Animate cell selection with ring highlight. Show dropdown opening with height animation and options appearing. Animate value selection and dropdown closing. Show SKU auto-generation with character-by-character fill in Column A. Demonstrate multiple rows with staggered updates.",
    "stepsToVerify": [
      "remotion/scenes/SpreadsheetScene.tsx exports SpreadsheetScene component",
      "Browser frame enters with slide animation",
      "Cell selection shows animated ring around cell",
      "Dropdown opens with spring height animation",
      "Value selection highlights option before closing",
      "SKU in Column A fills character-by-character with typing cursor",
      "Multiple rows show different SKU combinations"
    ],
    "passes": true
  },
  {
    "id": "remotion-settings-scene",
    "category": "Remotion Video",
    "description": "Create SettingsScene.tsx (~4 seconds, 120 frames). Show settings dialog scaling in from center with spring animation. Highlight delimiter options with spotlight effect. Animate button state change when selecting new delimiter. Show all visible SKUs updating simultaneously with flash effect.",
    "stepsToVerify": [
      "remotion/scenes/SettingsScene.tsx exports SettingsScene component",
      "Dialog appears with spring scale from center",
      "Delimiter options are highlighted with spotlight",
      "Button click shows state change animation",
      "SKU cascade update shows all SKUs changing with flash",
      "New SKU format reflects changed delimiter"
    ],
    "passes": true
  },
  {
    "id": "remotion-validation-scene",
    "category": "Remotion Video",
    "description": "Create ValidationScene.tsx (~5 seconds, 150 frames). Show sheet tabs area with zoom focus. Animate tab click and sheet switch. Show validation panel sliding up from bottom. Error list items fade in sequentially. Demonstrate click-to-navigate animation from error to cell.",
    "stepsToVerify": [
      "remotion/scenes/ValidationScene.tsx exports ValidationScene component",
      "Sheet tabs area receives focus with zoom",
      "Tab click shows cursor and tab switches",
      "Validation panel slides up from bottom",
      "Error items appear with staggered fade-in",
      "Navigate animation shows cursor moving from error to cell"
    ],
    "passes": true
  },
  {
    "id": "remotion-outro-scene",
    "category": "Remotion Video",
    "description": "Create OutroScene.tsx (~2.5 seconds, 75 frames). Feature bullet list slides in from right with staggered timing. CTA text 'Try it now' animates with scale and glow effect. App logo fades back in at corner position.",
    "stepsToVerify": [
      "remotion/scenes/OutroScene.tsx exports OutroScene component",
      "Feature bullets slide in from right with stagger",
      "CTA text has scale animation with glow effect",
      "Logo fades in at corner",
      "Scene provides clear call-to-action"
    ],
    "passes": true
  },
  {
    "id": "remotion-main-composition",
    "category": "Remotion Video",
    "description": "Create SKUDemo.tsx main composition assembling all scenes. Use TransitionSeries for smooth scene transitions (fade, slide). Configure proper timing for each scene. Total duration ~35 seconds (1050 frames at 30fps). Register composition in Root.tsx with 1920x1080 resolution.",
    "stepsToVerify": [
      "remotion/compositions/SKUDemo.tsx exports SKUDemo component",
      "All 6 scenes are imported and sequenced",
      "TransitionSeries used with fade/slide transitions between scenes",
      "Total duration is approximately 1050 frames",
      "Root.tsx registers SKUDemo with 1920x1080 resolution and 30fps",
      "Full video plays through all scenes in Remotion Studio",
      "Transitions are smooth with no visual glitches"
    ],
    "passes": true
  },
  {
    "id": "remotion-render-output",
    "category": "Remotion Video",
    "description": "Render final video and verify quality. Run npm run remotion:build to generate MP4. Verify video is ~35 seconds, 1920x1080, plays smoothly. All animations render correctly. Scene transitions are seamless.",
    "stepsToVerify": [
      "npm run remotion:build completes without errors",
      "Output file out/sku-demo.mp4 exists",
      "Video duration is approximately 35 seconds",
      "Video resolution is 1920x1080",
      "All animations render as expected (no frame drops)",
      "Scene transitions play smoothly",
      "Video file size is reasonable for quality"
    ],
    "passes": true
  },
  {
    "id": "spec-deletion-removes-column",
    "category": "Bug Fix",
    "description": "Deleting a specification should fully remove its column from the sheet reactively. Currently, due to a stale closure bug in handleDeleteConfirm, the regenerateAllSKUs function uses old sheet data and overwrites the updated data, causing deleted columns to reappear. Fix by making the entire delete operation atomic in a single setState call that removes the spec, removes columns, removes column data from rows, and regenerates SKUs all together.",
    "stepsToVerify": [
      "Add a specification (e.g., 'Color') with values and a column in the sheet",
      "Add some rows with values selected in that column",
      "Delete the specification from the sidebar",
      "Column immediately disappears from the sheet (no refresh needed)",
      "Column data is removed from all rows",
      "SKUs are regenerated correctly without the deleted spec's fragment",
      "Undo restores the specification and column",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "row-deletion",
    "category": "Spreadsheet Features",
    "description": "Add ability to delete rows from the spreadsheet. Implement right-click context menu on row indicators (leftmost numbered cells) with 'Delete Row' option. Show confirmation dialog before deletion. Header row (row 0) cannot be deleted. Integrate with undo/redo history.",
    "stepsToVerify": [
      "Right-click on row indicator (row number cell) shows context menu",
      "Context menu has 'Delete Row' option",
      "Clicking 'Delete Row' shows confirmation dialog",
      "Confirming deletes the row from sheet data",
      "Header row (row 0) does not show delete option",
      "Undo restores the deleted row",
      "Redo re-deletes the row",
      "Works correctly with any number of rows",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "cell-background-color",
    "category": "Spreadsheet Features",
    "description": "Add ability to change cell background color. Create a formatting toolbar or context menu option with color picker. User can select one or more cells and apply a background color. Color is stored in CellData.bg field and persisted. Color is preserved across undo/redo operations.",
    "stepsToVerify": [
      "Select a cell or range of cells in the spreadsheet",
      "Color picker UI is accessible (toolbar button or context menu)",
      "Clicking a color applies background to selected cells",
      "Background color persists after deselecting cells",
      "Background color persists after page refresh (localStorage)",
      "Undo reverts color change",
      "Clear formatting option removes custom background",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "cell-text-color",
    "category": "Spreadsheet Features",
    "description": "Add ability to change cell text/font color. Extend CellData interface with 'fc' (font color) field. Create text color picker in formatting toolbar. User can select cells and apply text color. Color is rendered via inline styles or CSS classes.",
    "stepsToVerify": [
      "CellData interface has 'fc?: string' field for font color",
      "Select a cell or range of cells",
      "Text color picker is accessible in formatting UI",
      "Clicking a color applies text color to selected cells",
      "Text color renders correctly in the spreadsheet",
      "Text color persists after page refresh",
      "Undo reverts text color change",
      "Clear formatting removes custom text color",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "column-resizing",
    "category": "Spreadsheet Features",
    "description": "Add ability to resize column widths by dragging. Extend ColumnDef interface with 'width?: number' field. Add resize handles (thin vertical lines) at right edge of column headers. Dragging handle adjusts column width. Width is persisted in sheet store. Double-click resize handle to auto-fit column width to content.",
    "stepsToVerify": [
      "ColumnDef interface has 'width?: number' field",
      "Hover near right edge of column header shows resize cursor",
      "Dragging adjusts column width in real-time",
      "Releasing mouse commits the new width",
      "Width persists after switching sheets and returning",
      "Width persists after page refresh",
      "Double-click resize handle auto-fits width to content",
      "Minimum width constraint (80px) is enforced",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "row-resizing",
    "category": "Spreadsheet Features",
    "description": "Add ability to resize row heights by dragging. Add resize handles at bottom edge of row indicators. Dragging handle adjusts row height. Store row heights in SheetConfig. Default row height remains 32px.",
    "stepsToVerify": [
      "SheetConfig has 'rowHeights?: number[]' field",
      "Hover near bottom edge of row indicator shows resize cursor",
      "Dragging adjusts row height in real-time",
      "Releasing mouse commits the new height",
      "Height persists after page refresh",
      "Default height for new rows is 32px",
      "Minimum height constraint (24px) is enforced",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "row-indicator-width-fix",
    "category": "Bug Fix",
    "description": "Row indicator column (row numbers 1, 2, 3...) should match the header cell width. Currently they are misaligned - the header cell is wider than the row number cells below it. Fix CSS to enforce consistent width across all row indicator elements.",
    "stepsToVerify": [
      "Row number cells align perfectly with the header cell above",
      "All row indicators have the same width (40px)",
      "Visual appearance is consistent across light/dark mode",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "color-picker-selection-fix",
    "category": "Bug Fix",
    "description": "Cell background and text color pickers deselect cells when clicked, preventing colors from being applied. The dropdown menu steals focus which clears the spreadsheet selection. Fix by using modal={false} on DropdownMenu components and preserving selection state in a ref before the dropdown opens.",
    "stepsToVerify": [
      "Select a cell in the spreadsheet",
      "Click the background color picker button - cell stays selected",
      "Click a color swatch - background color is applied to the cell",
      "Select multiple cells, click text color picker - cells stay selected",
      "Click a text color - text color is applied to all selected cells",
      "Colors persist after page refresh",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "copy-cell-styles-shortcut",
    "category": "Spreadsheet Features",
    "description": "Implement Option+Cmd+C keyboard shortcut to copy the styles of a selected cell (background color, text color, bold, italic, alignment) without copying the cell text content. Styles can then be pasted to other cells.",
    "stepsToVerify": [
      "Select a cell with custom styling (background color, text color, etc.)",
      "Press Option+Cmd+C - styles are copied to clipboard/memory",
      "Select another cell or range of cells",
      "Press Option+Cmd+V (or similar) - styles are applied without changing text",
      "Original cell content remains unchanged in target cells",
      "Works with multiple style properties at once",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "copy-paste-styles-macos-fix",
    "category": "Bug Fix",
    "description": "Fix Option+Cmd+C/V keyboard shortcuts not working on macOS. The current implementation uses event.key which returns the character produced (Option+C='ç', Option+V='√') instead of the physical key. Change to use event.code ('KeyC', 'KeyV') which is unaffected by modifier keys. Also update tests to use event.code.",
    "stepsToVerify": [
      "Select a cell with background color and text formatting",
      "Press Option+Cmd+C on Mac - styles are copied (no special character inserted)",
      "Select a different cell",
      "Press Option+Cmd+V on Mac - styles are pasted to the cell",
      "Alt+Ctrl+C/V still works on Windows/Linux",
      "Tests in SpreadsheetContainer.test.tsx use event.code for copy/paste style tests",
      "npm run test passes"
    ],
    "passes": true
  },
  {
    "id": "undo-keyboard-shortcut",
    "category": "Spreadsheet Features",
    "description": "Add Cmd+Z (Mac) / Ctrl+Z (Windows/Linux) keyboard shortcut for undo. The undo functionality already exists via toolbar button, this adds the standard keyboard shortcut. Should call the existing handleUndo function when pressed.",
    "stepsToVerify": [
      "Make an edit to a cell in the spreadsheet",
      "Press Cmd+Z (Mac) or Ctrl+Z (Windows) - edit is undone",
      "Shortcut works when spreadsheet container is focused",
      "Shortcut is prevented when nothing to undo",
      "Works alongside existing Undo toolbar button",
      "npm run typecheck passes"
    ],
    "passes": false
  },
  {
    "id": "redo-keyboard-shortcut",
    "category": "Spreadsheet Features",
    "description": "Add Shift+Cmd+Z (Mac) / Shift+Ctrl+Z (Windows/Linux) keyboard shortcut for redo. The redo functionality already exists via toolbar button, this adds the standard keyboard shortcut. Should call the existing handleRedo function when pressed.",
    "stepsToVerify": [
      "Make an edit and then undo it",
      "Press Shift+Cmd+Z (Mac) or Shift+Ctrl+Z (Windows) - edit is redone",
      "Shortcut works when spreadsheet container is focused",
      "Shortcut is prevented when nothing to redo",
      "Works alongside existing Redo toolbar button",
      "npm run typecheck passes"
    ],
    "passes": false
  },
  {
    "id": "select-all-keyboard-shortcut",
    "category": "Spreadsheet Features",
    "description": "Add Cmd+A (Mac) / Ctrl+A (Windows/Linux) keyboard shortcut to select all cells in the spreadsheet. Creates a RangeSelection from (0,0) to (lastRow, lastCol). Prevents browser default select-all behavior.",
    "stepsToVerify": [
      "Click on the spreadsheet to focus it",
      "Press Cmd+A (Mac) or Ctrl+A (Windows) - all cells are selected",
      "Selection visually highlights all cells in the sheet",
      "Can apply formatting (background color, bold, etc.) to all selected cells",
      "Browser does not select page text (default prevented)",
      "Works with any number of rows and columns",
      "npm run typecheck passes"
    ],
    "passes": false
  },
  {
    "id": "auto-populate-combinations",
    "category": "Spreadsheet Features",
    "description": "Add Auto Populate button to toolbar that generates all possible combinations of specification values. Opens a dialog where user can: 1) Reorder specs by dragging to control which changes first/last, 2) See total combination count preview, 3) Choose to replace all data or append below existing. Generates combinations in structured order where leftmost spec changes least (stays constant for blocks) and rightmost spec changes most (changes every row).",
    "stepsToVerify": [
      "Auto Populate button appears in toolbar (Sparkles icon)",
      "Clicking button opens AutoPopulateDialog",
      "Dialog shows list of spec columns that can be reordered by dragging",
      "Dialog shows combination count preview (e.g., '24 combinations')",
      "Dialog has radio buttons for 'Replace all data' vs 'Append below existing'",
      "Clicking Generate creates all combinations in the spreadsheet",
      "Combinations are ordered: first spec changes least, last spec changes most",
      "Each combination is unique (no duplicates)",
      "SKUs are auto-generated for each row",
      "Undo reverts the entire auto-populate operation",
      "npm run typecheck passes"
    ],
    "passes": false
  },
  {
    "id": "free-column-deletion",
    "category": "Bug Fix",
    "description": "Free columns (non-spec columns) cannot be deleted via right-click context menu. The delete option should appear for free columns just like spec columns, allowing users to remove them.",
    "stepsToVerify": [
      "Add a free column to the sheet",
      "Right-click on the free column header",
      "Context menu shows 'Delete column' option",
      "Clicking delete shows confirmation dialog",
      "Confirming deletes the free column and its data",
      "Undo restores the deleted free column",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "free-column-rename",
    "category": "Spreadsheet Features",
    "description": "Free column titles should be renameable. Add ability to rename free columns by double-clicking the column header or via context menu option. Spec column headers should sync with specification name.",
    "stepsToVerify": [
      "Add a free column with a title",
      "Double-click on the free column header - enters edit mode",
      "Type new name and press Enter - header is renamed",
      "Press Escape while editing - cancels rename",
      "Right-click context menu has 'Rename' option for free columns",
      "Renamed title persists after page refresh",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "column-resize-full-column",
    "category": "Bug Fix",
    "description": "When resizing a column by dragging the header edge, only the header cell resizes while data cells remain unchanged. Fix to ensure the entire column (header and all data cells) resize together.",
    "stepsToVerify": [
      "Hover on the right edge of a column header",
      "Drag to resize the column width",
      "Header cell AND all data cells in that column resize together",
      "Column width is consistent from header to last row",
      "Width persists after page refresh",
      "Works for all column types (SKU, spec, free)",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "column-header-data-width-consistency",
    "category": "Bug Fix",
    "description": "Column widths for column titles (in DraggableColumnHeaders) do not match the widths of the data cells below them, causing misalignment. The SKU/ID column is correct and should remain fixed. Fix other columns to ensure header and data cell widths are synchronized.",
    "stepsToVerify": [
      "Column headers align perfectly with their data cells below",
      "SKU column remains fixed width (current implementation preserved)",
      "Spec columns have consistent header/data width",
      "Free columns have consistent header/data width",
      "Alignment is maintained when scrolling horizontally",
      "Alignment is maintained after adding/removing columns",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "text-formatting-options",
    "category": "Spreadsheet Features",
    "description": "Add text formatting options to the spreadsheet toolbar: bold, italic, text alignment (left, center, right). Extend CellData interface with formatting properties. Apply formatting to selected cells.",
    "stepsToVerify": [
      "CellData interface has 'bold?: boolean', 'italic?: boolean', 'align?: string' fields",
      "Toolbar shows Bold (B), Italic (I), and alignment buttons",
      "Select cells and click Bold - text becomes bold",
      "Select cells and click Italic - text becomes italic",
      "Select cells and click alignment buttons - text aligns accordingly",
      "Formatting buttons show active state when selected cell has that format",
      "Formatting persists after page refresh",
      "Undo/redo works with formatting changes",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "excel-column-letters-header",
    "category": "Spreadsheet Features",
    "description": "Add Excel-style column letter headers (A, B, C, D...) above the main column headers. Clicking on a letter selects the entire column including the header. This provides familiar spreadsheet navigation and bulk column selection.",
    "stepsToVerify": [
      "Row of column letters (A, B, C...) appears above column headers",
      "Letters continue correctly for many columns (AA, AB, etc. after Z)",
      "Clicking on a letter selects the entire column (all cells including header)",
      "Selected column is visually highlighted",
      "Can select multiple columns by clicking and dragging across letters",
      "Shift+click to select range of columns",
      "Selected column(s) can have formatting applied via toolbar",
      "npm run typecheck passes"
    ],
    "passes": true
  },
  {
    "id": "preserve-cell-selection-on-toolbar-actions",
    "category": "Bug Fix",
    "description": "Cell selection is lost after each toolbar action (align-left, center, align-right, bold, italic, colors, etc.), forcing users to re-select the cell before performing another action. Fix to preserve cell selection after toolbar actions. Selection should only clear when clicking outside the spreadsheet on non-action elements.",
    "stepsToVerify": [
      "Select a cell in the spreadsheet",
      "Click align-left button - cell stays selected",
      "Click bold button - cell stays selected",
      "Click text color - cell stays selected after selecting color",
      "Click background color - cell stays selected after selecting color",
      "Can perform multiple formatting actions without re-selecting the cell",
      "Clicking outside the spreadsheet (not on toolbar) deselects the cell",
      "Clicking on another cell changes selection to that cell",
      "npm run typecheck passes"
    ],
    "passes": true
  }
]
